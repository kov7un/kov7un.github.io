! function($, e, i, r) {
    function t(t) {
        var a = this;
        a.$form = t, a.$attributeFields = t.find(".variations select"), a.$singleVariation = t.find(".single_variation"), a.$singleVariationWrap = t.find(".single_variation_wrap"), a.$resetVariations = t.find(".reset_variations"), a.$product = t.closest(".product"), a.variationData = t.data("product_variations"), a.useAjax = !1 === a.variationData, a.xhr = !1, a.loading = !0, a.$singleVariationWrap.show(), a.$form.off(".wc-variation-form"), a.getChosenAttributes = a.getChosenAttributes.bind(a), a.findMatchingVariations = a.findMatchingVariations.bind(a), a.isMatch = a.isMatch.bind(a), a.toggleResetLink = a.toggleResetLink.bind(a), t.on("click.wc-variation-form", ".reset_variations", {
            variationForm: a
        }, a.onReset), t.on("reload_product_variations", {
            variationForm: a
        }, a.onReload), t.on("hide_variation", {
            variationForm: a
        }, a.onHide), t.on("show_variation", {
            variationForm: a
        }, a.onShow), t.on("click", ".single_add_to_cart_button", {
            variationForm: a
        }, a.onAddToCart), t.on("reset_data", {
            variationForm: a
        }, a.onResetDisplayedVariation), t.on("change.wc-variation-form", ".variations select", {
            variationForm: a
        }, a.onChange), t.on("found_variation.wc-variation-form", {
            variationForm: a
        }, a.onFoundVariation), t.on("check_variations.wc-variation-form", {
            variationForm: a
        }, a.onFindVariation), t.on("update_variation_values.wc-variation-form", {
            variationForm: a
        }, a.onUpdateAttributes), setTimeout(function() {
            t.trigger("check_variations"), t.trigger("wc_variation_form", a), a.loading = !1
        }, 100)
    }
    t.prototype.onReset = function(t) {
        t.preventDefault(), t.data.variationForm.$attributeFields.val("").trigger("change"), t.data.variationForm.$form.trigger("reset_data")
    }, t.prototype.onReload = function(t) {
        t = t.data.variationForm;
        t.variationData = t.$form.data("product_variations"), t.useAjax = !1 === t.variationData, t.$form.trigger("check_variations")
    }, t.prototype.onHide = function(t) {
        t.preventDefault(), t.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("wc-variation-is-unavailable").addClass("disabled wc-variation-selection-needed"), t.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-enabled").addClass("woocommerce-variation-add-to-cart-disabled")
    }, t.prototype.onShow = function(t, a, i) {
        t.preventDefault(), i ? (t.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("disabled wc-variation-selection-needed wc-variation-is-unavailable"), t.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-disabled").addClass("woocommerce-variation-add-to-cart-enabled"), t.data.variationForm.$form.find(".quantity button").removeClass("disabled")) : (t.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("wc-variation-selection-needed").addClass("disabled wc-variation-is-unavailable"), t.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-enabled").addClass("woocommerce-variation-add-to-cart-disabled"), t.data.variationForm.$form.find(".quantity button").addClass("disabled")), wp.mediaelement && t.data.variationForm.$form.find(".wp-audio-shortcode, .wp-video-shortcode").not(".mejs-container").filter(function() {
            return !$(this).parent().hasClass("mejs-mediaelement")
        }).mediaelementplayer(wp.mediaelement.settings)
    }, t.prototype.onAddToCart = function(t) {
        $(this).is(".disabled") && (t.preventDefault(), $(this).is(".wc-variation-is-unavailable") ? e.alert(wc_add_to_cart_variation_params.i18n_unavailable_text) : $(this).is(".wc-variation-selection-needed") && e.alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text))
    }, t.prototype.onResetDisplayedVariation = function(t) {
        t = t.data.variationForm;
        t.$product.find(".product_meta").find(".sku").wc_reset_content(), t.$product.find(".product_weight, .woocommerce-product-attributes-item--weight .woocommerce-product-attributes-item__value").wc_reset_content(), t.$product.find(".product_dimensions, .woocommerce-product-attributes-item--dimensions .woocommerce-product-attributes-item__value").wc_reset_content(), t.$form.trigger("reset_image"), t.$singleVariation.slideUp(200).trigger("hide_variation")
    }, t.prototype.onFindVariation = function(t, a) {
        var i = t.data.variationForm,
            o = void 0 !== a ? a : i.getChosenAttributes(),
            t = o.data;
        o.count && o.count === o.chosenCount ? i.useAjax ? (i.xhr && i.xhr.abort(), i.$form.block({
            message: null,
            overlayCSS: {
                background: "#fff",
                opacity: .6
            }
        }), t.product_id = parseInt(i.$form.data("product_id"), 10), t.custom_data = i.$form.data("custom_data"), i.xhr = $.ajax({
            url: wc_add_to_cart_variation_params.wc_ajax_url.toString().replace("%%endpoint%%", "get_variation"),
            type: "POST",
            data: t,
            success: function(t) {
                t ? i.$form.trigger("found_variation", [t]) : (i.$form.trigger("reset_data"), o.chosenCount = 0, i.loading || (i.$form.find(".single_variation").after('<p class="wc-no-matching-variations woocommerce-info">' + wc_add_to_cart_variation_params.i18n_no_matching_variations_text + "</p>"), i.$form.find(".wc-no-matching-variations").slideDown(200)))
            },
            complete: function() {
                i.$form.unblock()
            }
        })) : (i.$form.trigger("update_variation_values"), (a = i.findMatchingVariations(i.variationData, t).shift()) ? i.$form.trigger("found_variation", [a]) : (i.$form.trigger("reset_data"), o.chosenCount = 0, i.loading || (i.$form.find(".single_variation").after('<p class="wc-no-matching-variations woocommerce-info">' + wc_add_to_cart_variation_params.i18n_no_matching_variations_text + "</p>"), i.$form.find(".wc-no-matching-variations").slideDown(200)))) : (i.$form.trigger("update_variation_values"), i.$form.trigger("reset_data")), i.toggleResetLink(0 < o.chosenCount)
    }, t.prototype.onFoundVariation = function(t, a) {
        var t = t.data.variationForm,
            i = t.$product.find(".product_meta").find(".sku"),
            o = t.$product.find(".product_weight, .woocommerce-product-attributes-item--weight .woocommerce-product-attributes-item__value"),
            n = t.$product.find(".product_dimensions, .woocommerce-product-attributes-item--dimensions .woocommerce-product-attributes-item__value"),
            e = t.$singleVariationWrap.find(".quantity"),
            r = !0,
            s = !1,
            d = "";
        a.sku ? i.wc_set_content(a.sku) : i.wc_reset_content(), a.weight ? o.wc_set_content(a.weight_html) : o.wc_reset_content(), a.dimensions ? n.wc_set_content($.parseHTML(a.dimensions_html)[0].data) : n.wc_reset_content(), a.variation_is_visible ? (s = c("variation-template"), a.variation_id) : s = c("unavailable-variation-template"), d = (d = (d = s({
            variation: a
        })).replace("/*<![CDATA[*/", "")).replace("/*]]>*/", ""), t.$singleVariation.html(d), t.$form.find('input[name="variation_id"], input.variation_id').val(a.variation_id).trigger("change"), "yes" === a.is_sold_individually ? (e.find("input.qty").val("1").attr("min", "1").attr("max", "").trigger("change"), e.hide()) : (i = e.find("input.qty"), o = parseFloat(i.val()), o = isNaN(o) || (o = o > parseFloat(a.max_qty) ? a.max_qty : o) < parseFloat(a.min_qty) ? a.min_qty : o, i.attr("min", a.min_qty).attr("max", a.max_qty).val(o).trigger("change"), e.show()), a.is_purchasable && a.is_in_stock && a.variation_is_visible || (r = !1), (t.$singleVariation.text().trim() ? t.$singleVariation.slideDown(200) : t.$singleVariation.show()).trigger("show_variation", [a, r])
    }, t.prototype.onChange = function(t) {
        t = t.data.variationForm;
        t.$form.find('input[name="variation_id"], input.variation_id').val("").trigger("change"), t.$form.find(".wc-no-matching-variations").remove(), t.useAjax || t.$form.trigger("woocommerce_variation_select_change"), t.$form.trigger("check_variations"), t.$form.trigger("woocommerce_variation_has_changed")
    }, t.prototype.addSlashes = function(t) {
        return t = (t = t.replace(/'/g, "\\'")).replace(/"/g, '\\"')
    }, t.prototype.onUpdateAttributes = function(t) {
        var w = t.data.variationForm,
            b = w.getChosenAttributes().data;
        w.useAjax || (w.$attributeFields.each(function(t, a) {
            var i, o = $(a),
                n = o.data("attribute_name") || o.attr("name"),
                a = $(a).data("show_option_none"),
                e = ":gt(0)",
                r = $("<select/>"),
                s = o.val() || "",
                d = !0,
                c = (o.data("attribute_html") || ((c = o.clone()).find("option").removeAttr("attached").prop("disabled", !1).prop("selected", !1), o.data("attribute_options", c.find("option" + e).get()), o.data("attribute_html", c.html())), r.html(o.data("attribute_html")), $.extend(!0, {}, b)),
                m = (c[n] = "", w.findMatchingVariations(w.variationData, c));
            for (i in m)
                if (void 0 !== m[i]) {
                    var _, v = m[i].attributes;
                    for (_ in v)
                        if (v.hasOwnProperty(_)) {
                            var l = v[_],
                                u = "";
                            if (_ === n)
                                if (m[i].variation_is_active && (u = "enabled"), l) {
                                    var l = $("<div/>").html(l).text(),
                                        f = r.find("option");
                                    if (f.length)
                                        for (var h = 0, p = f.length; h < p; h++) {
                                            var g = $(f[h]);
                                            if (l === g.val()) {
                                                g.addClass("attached " + u);
                                                break
                                            }
                                        }
                                } else r.find("option:gt(0)").addClass("attached " + u)
                        }
                }
            c = r.find("option.attached").length, s && (d = !1, 0 !== c && r.find("option.attached.enabled").each(function() {
                var t = $(this).val();
                if (s === t) return !(d = !0)
            })), 0 < c && s && d && "no" === a && (r.find("option:first").remove(), e = ""), r.find("option" + e + ":not(.attached)").remove(), o.html(r.html()), o.find("option" + e + ":not(.enabled)").prop("disabled", !0), s ? d ? o.val(s) : o.val("").trigger("change") : o.val("")
        }), w.$form.trigger("woocommerce_update_variation_values"))
    }, t.prototype.getChosenAttributes = function() {
        var i = {},
            o = 0,
            n = 0;
        return this.$attributeFields.each(function() {
            var t = $(this).data("attribute_name") || $(this).attr("name"),
                a = $(this).val() || "";
            0 < a.length && n++, o++, i[t] = a
        }), {
            count: o,
            chosenCount: n,
            data: i
        }
    }, t.prototype.findMatchingVariations = function(t, a) {
        for (var i = [], o = 0; o < t.length; o++) {
            var n = t[o];
            this.isMatch(n.attributes, a) && i.push(n)
        }
        return i
    }, t.prototype.isMatch = function(t, a) {
        var i, o, n, e = !0;
        for (i in t) t.hasOwnProperty(i) && (o = t[i], n = a[i], o !== r && n !== r && 0 !== o.length && 0 !== n.length && o !== n && (e = !1));
        return e
    }, t.prototype.toggleResetLink = function(t) {
        t ? "hidden" === this.$resetVariations.css("visibility") && this.$resetVariations.css("visibility", "visible").hide().fadeIn() : this.$resetVariations.css("visibility", "hidden")
    }, $.fn.wc_variation_form = function() {
        return new t(this), this
    }, $.fn.wc_set_content = function(t) {
        r === this.attr("data-o_content") && this.attr("data-o_content", this.text()), this.text(t)
    }, $.fn.wc_reset_content = function() {
        r !== this.attr("data-o_content") && this.text(this.attr("data-o_content"))
    }, $.fn.wc_set_variation_attr = function(t, a) {
        r === this.attr("data-o_" + t) && this.attr("data-o_" + t, this.attr(t) ? this.attr(t) : ""), !1 === a ? this.removeAttr(t) : this.attr(t, a)
    }, $.fn.wc_reset_variation_attr = function(t) {
        r !== this.attr("data-o_" + t) && this.attr(t, this.attr("data-o_" + t))
    }, $(function() {
        "undefined" != typeof wc_add_to_cart_variation_params && $(".variations_form").each(function() {
            $(this).wc_variation_form()
        })
    });
    var c = function(t) {
        var a = i.getElementById("tmpl-" + t).textContent;
        return /<#\s?data\./.test(a) || /{{{?\s?data\.(?!variation\.).+}}}?/.test(a) || /{{{?\s?data\.variation\.[\w-]*[^\s}]/.test(a) ? wp.template(t) : function(t) {
            var n = t.variation || {};
            return a.replace(/({{{?)\s?data\.variation\.([\w-]*)\s?(}}}?)/g, function(t, a, i, o) {
                if (a.length !== o.length) return "";
                o = n[i] || "";
                return 2 === a.length ? e.escape(o) : o
            })
        }
    }
}(jQuery, window, document);